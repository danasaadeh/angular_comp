
import { NgForOf, NgIf } from '@angular/common';
import { Component } from '@angular/core';
import { Router } from '@angular/router';
import { ProductService } from '../product.service';

@Component({
  selector: 'app-home',
  template: `
    <div
      id="home-page"
      style="display: flex; justify-content: center; align-items: flex-start; min-height: 100vh"
    >
      <!-- Left dev -->
      <div
        id="product-details"
        style="width: 50%;  flex-direction: column; align-items: center;"
        *ngIf="product"
      >
        <div style="margin-top: 20px;">Name: {{ product.name }}</div>
        <div>
          <img
            [src]="product.image"
            alt="{{ product.name }}"
            style="max-width: 400px; height: 450px;"
          />
        </div>
        <div>Details: {{ product.details }}</div>
        <div>Price: &#36;{{ product.price }}</div>
        <div>Size: {{ product.size }}</div>
      </div>
      <!-- Right dev -->
      <div style="width: 50%; display: flex; flex-direction: column;">
        <button
          style="margin-bottom: 20px; padding: 15px; background-color: #CB6F6E; color: white; border: none; border-radius: 4px; font-size: 16px; cursor: pointer;"
          (click)="showAddProductPage()"
        >
          Add Product
        </button>
        <button
          id="products-list"
          *ngFor="let product of products"
          style="padding: 20px;"
          (click)="showProductDetails(product)"
        >
          <div style="padding: 10px">Name: {{ product.name }}</div>
          <div>
            <img
              [src]="product.image"
              alt="{{ product.name }}"
              style="max-width: 200px; height: 250px;"
            />
          </div>
        </button>
      </div>
    </div>
  `,

  imports: [NgForOf, NgIf],
})
export class HomeComponent {
  product: any;
  products: any[] = [];

  constructor(private router: Router, private productService: ProductService) {
    this.productService.products$.subscribe((data) => (this.products = data));
  }

  showProductDetails(product: any) {
    this.product = product;
  }

  showAddProductPage() {
    this.router.navigate(['/add-product']);
  }
}
